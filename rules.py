import os
import Mlogging

def clear_screen():
    """Очищает экран консоли."""
    os.system('cls' if os.name == 'nt' else 'clear')

# ==============================================================================
#                        БЛОК ПРАВИЛ №1 (ТЕМЫ 1-15)
# ==============================================================================
def get_rules_part_1():
    """Возвращает правила с 1 по 15."""
    rules = {
        '1': {
            'title': 'Квадратные уравнения',
            'explanation': """
================================================================================
|                    Квадратные уравнения (a*x^2 + b*x + c = 0)                  |
================================================================================

1. Дискриминант (D):
   Формула: D = b^2 - 4*a*c
   - D > 0: Два различных действительных корня.
   - D = 0: Один действительный корень (x = -b / (2*a)).
   - D < 0: Нет действительных корней.

2. Формула корней:
   x_1,2 = (-b +- sqrt(D)) / (2*a)

   Пример: 2*x^2 - 7*x + 3 = 0
   D = (-7)^2 - 4*2*3 = 49 - 24 = 25
   x_1 = (7 + sqrt(25)) / (2*2) = (7 + 5) / 4 = 3
   x_2 = (7 - sqrt(25)) / (2*2) = (7 - 5) / 4 = 0.5

3. Теорема Виета (для x^2 + p*x + q = 0):
   - Сумма корней: x_1 + x_2 = -p
   - Произведение корней: x_1 * x_2 = q
"""
        },
        '2': {
            'title': 'Формулы сокращенного умножения (ФСУ)',
            'explanation': """
================================================================================
|                     Формулы сокращенного умножения (ФСУ)                      |
================================================================================

1. Квадрат суммы:       (a + b)^2 = a^2 + 2*a*b + b^2
2. Квадрат разности:    (a - b)^2 = a^2 - 2*a*b + b^2
3. Разность квадратов:  a^2 - b^2 = (a - b)*(a + b)
4. Куб суммы:           (a + b)^3 = a^3 + 3*a^2*b + 3*a*b^2 + b^3
5. Куб разности:        (a - b)^3 = a^3 - 3*a^2*b + 3*a*b^2 - b^3
6. Сумма кубов:         a^3 + b^3 = (a + b)*(a^2 - a*b + b^2)
7. Разность кубов:      a^3 - b^3 = (a - b)*(a^2 + a*b + b^2)
"""
        },
        '3': {
            'title': 'Свойства степеней',
            'explanation': """
================================================================================
|                               Свойства степеней                               |
================================================================================

1. Умножение:         a^m * a^n = a^(m+n)
   Пример: 2^3 * 2^2 = 2^(3+2) = 2^5 = 32

2. Деление:           a^m / a^n = a^(m-n)
   Пример: 3^5 / 3^3 = 3^(5-3) = 3^2 = 9

3. Возведение в степень: (a^m)^n = a^(m*n)
   Пример: (5^2)^3 = 5^(2*3) = 5^6 = 15625

4. Степень произведения: (a*b)^n = a^n * b^n
5. Степень частного:   (a/b)^n = a^n / b^n

6. Отрицательная степень: a^(-n) = 1 / a^n
   Пример: 2^(-3) = 1 / 2^3 = 1/8

7. Нулевая степень:     a^0 = 1 (при a != 0)
"""
        },
        '4': {
            'title': 'Свойства корней',
            'explanation': """
================================================================================
|                                Свойства корней                                |
================================================================================

Корень n-ой степени из числа a: n_sqrt(a)

1. Корень из произведения: n_sqrt(a*b) = n_sqrt(a) * n_sqrt(b)
   Пример: sqrt(4*9) = sqrt(4) * sqrt(9) = 2 * 3 = 6

2. Корень из частного: n_sqrt(a/b) = n_sqrt(a) / n_sqrt(b)
   Пример: sqrt(16/4) = sqrt(16) / sqrt(4) = 4 / 2 = 2

3. Возведение корня в степень: (n_sqrt(a))^m = n_sqrt(a^m)
   Пример: (3_sqrt(8))^2 = 3_sqrt(8^2) = 3_sqrt(64) = 4

4. Извлечение корня из корня: m_sqrt(n_sqrt(a)) = (m*n)_sqrt(a)
   Пример: 3_sqrt(sqrt(64)) = (3*2)_sqrt(64) = 6_sqrt(64) = 2

5. Основное свойство: n_sqrt(a^n) = a (если n - нечетное) или |a| (если n - четное)
"""
        },
        '5': {
            'title': 'Линейные уравнения и системы (СЛАУ)',
            'explanation': """
================================================================================
|                   Линейные уравнения и системы (СЛАУ)                         |
================================================================================

1. Линейное уравнение: a*x = b
   - Если a != 0, то x = b/a (один корень).
   - Если a = 0 и b = 0 (0*x = 0), то x - любое число (бесконечно много корней).
   - Если a = 0 и b != 0 (0*x = b), то корней нет.

2. Система двух линейных уравнений с двумя переменными:
   { a1*x + b1*y = c1
   { a2*x + b2*y = c2

   Методы решения:
   - Метод подстановки: Выразить одну переменную из одного уравнения
     и подставить в другое.
     Пример: { x + y = 3  => x = 3 - y
             { 2x - y = 0
     2*(3 - y) - y = 0  => 6 - 2y - y = 0  => 6 = 3y  => y = 2.
     Тогда x = 3 - 2 = 1. Ответ: (1, 2).

   - Метод сложения: Умножить уравнения на такие числа, чтобы коэффициенты
     при одной из переменных стали противоположными, и сложить уравнения.
     Пример: { x + y = 3
             { 2x - y = 0
     Складываем: (x+2x) + (y-y) = (3+0)  => 3x = 3  => x = 1.
     Подставляем в первое: 1 + y = 3  => y = 2. Ответ: (1, 2).
"""
        },
        '6': {
            'title': 'Прогрессии (Арифметическая и Геометрическая)',
            'explanation': """
================================================================================
|             Прогрессии (Арифметическая и Геометрическая)                      |
================================================================================

1. Арифметическая прогрессия (каждый следующий член больше предыдущего на d):
   - Разность прогрессии: d = a_(n+1) - a_n
   - Формула n-го члена: a_n = a_1 + d*(n-1)
   - Сумма первых n членов: S_n = ((a_1 + a_n) / 2) * n

2. Геометрическая прогрессия (каждый следующий член равен предыдущему, умноженному на q):
   - Знаменатель прогрессии: q = b_(n+1) / b_n
   - Формула n-го члена: b_n = b_1 * q^(n-1)
   - Сумма первых n членов: S_n = b_1 * (q^n - 1) / (q - 1)
   - Сумма бесконечно убывающей (|q| < 1): S = b_1 / (1 - q)
"""
        },
        '7': {
            'title': 'Основы тригонометрии',
            'explanation': """
================================================================================
|                            Основы тригонометрии                             |
================================================================================

В прямоугольном треугольнике для острого угла A:
- sin(A) = (противолежащий катет) / (гипотенуза)
- cos(A) = (прилежащий катет) / (гипотенуза)
- tg(A) = (противолежащий катет) / (прилежащий катет) = sin(A) / cos(A)
- ctg(A) = (прилежащий катет) / (противолежащий катет) = cos(A) / sin(A)

Основное тригонометрическое тождество:
sin^2(A) + cos^2(A) = 1

Значения для популярных углов:
Угол |  sin  |  cos  |   tg
---------------------------------
 30° |  1/2  |sqrt(3)/2| 1/sqrt(3)
 45° |sqrt(2)/2|sqrt(2)/2|    1
 60° |sqrt(3)/2|  1/2  |  sqrt(3)
"""
        },
        '8': {
            'title': 'Тригонометрические формулы',
            'explanation': """
================================================================================
|                        Тригонометрические формулы                           |
================================================================================

1. Формулы сложения:
   sin(a+b) = sin(a)cos(b) + cos(a)sin(b)
   sin(a-b) = sin(a)cos(b) - cos(a)sin(b)
   cos(a+b) = cos(a)cos(b) - sin(a)sin(b)
   cos(a-b) = cos(a)cos(b) + sin(a)sin(b)

2. Формулы двойного угла:
   sin(2a) = 2*sin(a)cos(a)
   cos(2a) = cos^2(a) - sin^2(a) = 2cos^2(a) - 1 = 1 - 2sin^2(a)

3. Формулы приведения (мнемоническое правило):
   - Если в формуле есть pi/2 или 3pi/2 (90, 270 град.), функция меняется
     на "ко-функцию" (sin->cos, cos->sin, tg->ctg, ctg->tg).
   - Знак результата определяется по знаку исходной функции в исходной четверти.
   Пример: cos(pi/2 + a) = -sin(a) (угол во II четверти, косинус там отрицательный)
"""
        },
        '9': {
            'title': 'Логарифмы и их свойства',
            'explanation': """
================================================================================
|                          Логарифмы и их свойства                            |
================================================================================

Определение: log(a, b) = x  <=>  a^x = b
(a > 0, a != 1, b > 0)

1. Основное тождество: a^(log(a, b)) = b

2. Свойства:
   - Логарифм произведения: log(a, x*y) = log(a, x) + log(a, y)
   - Логарифм частного:   log(a, x/y) = log(a, x) - log(a, y)
   - Логарифм степени:     log(a, b^k) = k * log(a, b)

3. Переход к новому основанию:
   log(a, b) = log(c, b) / log(c, a)
   Частный случай: log(a, b) = 1 / log(b, a)

4. Частные случаи:
   - Десятичный логарифм: lg(b) = log(10, b)
   - Натуральный логарифм: ln(b) = log(e, b), где e ~ 2.718
   - log(a, a) = 1
   - log(a, 1) = 0
"""
        },
        '10': {
            'title': 'Производная и ее применение',
            'explanation': """
================================================================================
|                         Производная и ее применение                           |
================================================================================

Производная f'(x) функции f(x) показывает скорость изменения функции в точке x.
Геометрический смысл: f'(x0) - тангенс угла наклона касательной к графику
функции в точке x0.

Таблица производных элементарных функций:
- (C)' = 0 (C - константа)
- (x)' = 1
- (x^n)' = n * x^(n-1)
- (sin(x))' = cos(x)
- (cos(x))' = -sin(x)
- (e^x)' = e^x
- (ln(x))' = 1/x

Правила дифференцирования:
- (u+v)' = u' + v'
- (u*v)' = u'*v + u*v'
- (u/v)' = (u'*v - u*v') / v^2

Применение:
- Если f'(x) > 0 на интервале, то функция f(x) возрастает.
- Если f'(x) < 0 на интервале, то функция f(x) убывает.
- Точки, в которых f'(x) = 0 или не существует, называются критическими.
  В этих точках могут быть максимумы или минимумы функции (экстремумы).
"""
        },
        '11': {
            'title': 'Площади плоских фигур',
            'explanation': """
================================================================================
|                           Площади плоских фигур                             |
================================================================================

1. Прямоугольник: S = a * b (a, b - стороны)
2. Квадрат: S = a^2 (a - сторона)
3. Параллелограмм: S = a * h (h - высота к стороне a)
   S = a * b * sin(A) (A - угол между сторонами a и b)
4. Ромб: S = (d1 * d2) / 2 (d1, d2 - диагонали)
5. Треугольник:
   - S = (1/2) * a * h (h - высота к стороне a)
   - S = (1/2) * a * b * sin(C) (C - угол между a и b)
   - Формула Герона: S = sqrt(p*(p-a)*(p-b)*(p-c)), где p=(a+b+c)/2
6. Трапеция: S = ((a+b)/2) * h (a, b - основания, h - высота)
7. Круг: S = pi * R^2 (R - радиус)
"""
        },
        '12': {
            'title': 'Теоремы синусов и косинусов',
            'explanation': """
================================================================================
|                      Теоремы синусов и косинусов                            |
================================================================================
Для произвольного треугольника со сторонами a, b, c и
противолежащими им углами A, B, C.

1. Теорема синусов (связывает стороны с противолежащими углами):
   a/sin(A) = b/sin(B) = c/sin(C) = 2*R
   (где R - радиус описанной окружности)
   Применение: найти сторону, зная два угла и другую сторону; найти угол.

2. Теорема косинусов (обобщение теоремы Пифагора):
   a^2 = b^2 + c^2 - 2*b*c*cos(A)
   b^2 = a^2 + c^2 - 2*a*c*cos(B)
   c^2 = a^2 + b^2 - 2*a*b*cos(C)
   Применение: найти третью сторону, зная две стороны и угол между ними;
   найти угол, зная все три стороны.
"""
        },
        '13': {
            'title': 'Векторы на плоскости',
            'explanation': """
================================================================================
|                            Векторы на плоскости                             |
================================================================================
Вектор - направленный отрезок.
Координаты вектора AB с началом A(x1, y1) и концом B(x2, y2):
AB = {x2-x1; y2-y1}

Действия с векторами a={ax; ay} и b={bx; by}:
1. Сложение: a + b = {ax+bx; ay+by}
2. Вычитание: a - b = {ax-bx; ay-by}
3. Умножение на число (скаляр) k: k*a = {k*ax; k*ay}

Длина (модуль) вектора a={ax; ay}:
|a| = sqrt(ax^2 + ay^2)

Скалярное произведение векторов:
- Через координаты: a*b = ax*bx + ay*by
- Через модули и угол: a*b = |a|*|b|*cos(A), где A - угол между векторами.
- Если a*b = 0, то векторы перпендикулярны.
"""
        },
        '14': {
            'title': 'Объемы пространственных фигур',
            'explanation': """
================================================================================
|                        Объемы пространственных фигур                          |
================================================================================
1. Прямоугольный параллелепипед: V = a * b * c (a,b,c - измерения)
2. Куб: V = a^3
3. Призма: V = S_осн * H (S_осн - площадь основания, H - высота)
4. Пирамида: V = (1/3) * S_осн * H
5. Цилиндр: V = pi * R^2 * H (R - радиус основания)
6. Конус: V = (1/3) * pi * R^2 * H
7. Шар: V = (4/3) * pi * R^3
"""
        },
        '15': {
            'title': 'Основы теории вероятностей',
            'explanation': """
================================================================================
|                      Основы теории вероятностей                           |
================================================================================
Вероятность события A - это отношение числа благоприятных для этого
события исходов к общему числу всех равновозможных исходов.

Формула: P(A) = m / n
- m - число исходов, благоприятствующих событию A.
- n - общее число всех равновозможных исходов.

Свойства вероятности:
- Вероятность достоверного события равна 1.
- Вероятность невозможного события равна 0.
- Вероятность случайного события лежит в диапазоне [0, 1].

Пример: В коробке 5 синих и 3 красных шара. Какова вероятность
вытащить синий шар?
- m (синие шары) = 5
- n (всего шаров) = 5 + 3 = 8
- P(синий) = 5 / 8 = 0.625
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №2 (ТЕМЫ 16-30)
# ==============================================================================
def get_rules_part_2():
    """Возвращает правила с 16 по 30."""
    rules = {
        '16': {
            'title': 'Неравенства и метод интервалов',
            'explanation': """
================================================================================
|                     Неравенства и метод интервалов                            |
================================================================================

Метод интервалов используется для решения сложных неравенств, особенно
квадратных и дробно-рациональных.

Алгоритм:
1. Перенести все члены неравенства в одну сторону, чтобы справа остался 0.
   Пример: x^2 - 3x > 4  =>  x^2 - 3x - 4 > 0

2. Найти корни соответствующего уравнения (нули функции).
   x^2 - 3x - 4 = 0  =>  x1 = -1, x2 = 4.

3. Отметить корни на числовой оси. Они разбивают ось на интервалы.
   <--(-inf)----(-1)----(4)----(+inf)-->

4. Определить знак выражения в каждом интервале, подставив любое число из него.
   - Интервал (-inf, -1): берем x=-2. (-2)^2 - 3*(-2) - 4 = 4+6-4 = 6 > 0. Знак (+).
   - Интервал (-1, 4): берем x=0. 0-0-4 = -4 < 0. Знак (-).
   - Интервал (4, +inf): берем x=5. 5^2 - 3*5 - 4 = 25-15-4 = 6 > 0. Знак (+).

5. Выбрать интервалы, удовлетворяющие знаку неравенства (> 0).
   Ответ: x принадлежит (-inf, -1) U (4, +inf).

Важно: если неравенство нестрогое (>= или <=), корни включаются в ответ.
"""
        },
        '17': {
            'title': 'Свойства функций',
            'explanation': """
================================================================================
|                              Свойства функций                               |
================================================================================
Функция y = f(x)

1. Область определения D(f): Множество всех допустимых значений x.
   - На ноль делить нельзя.
   - Корень четной степени можно извлекать только из неотрицательных чисел.
   - Аргумент логарифма должен быть строго больше нуля.
   Пример: y = 1/(x-2). D(f): x != 2.

2. Область значений E(f): Множество всех значений, которые принимает y.
   Пример: y = x^2. E(f): y >= 0.

3. Четность и нечетность:
   - Функция четная, если f(-x) = f(x). График симметричен относительно оси OY.
     Пример: y = x^2, y = cos(x).
   - Функция нечетная, если f(-x) = -f(x). График симметричен относительно начала координат.
     Пример: y = x^3, y = sin(x).
   - Иначе функция общего вида.
"""
        },
        '18': {
            'title': 'Комплексные числа',
            'explanation': """
================================================================================
|                             Комплексные числа                               |
================================================================================
Комплексное число z имеет вид z = a + b*i, где:
- a - действительная часть (Re z)
- b - мнимая часть (Im z)
- i - мнимая единица, i^2 = -1.

Действия:
Пусть z1 = a + b*i, z2 = c + d*i.
- Сложение: z1 + z2 = (a+c) + (b+d)*i
- Вычитание: z1 - z2 = (a-c) + (b-d)*i
- Умножение: z1 * z2 = (ac-bd) + (ad+bc)*i
- Деление: z1 / z2 = (z1 * z2_сопряженное) / (z2 * z2_сопряженное)
  где сопряженное к z2=c+d*i есть c-d*i.

Применение: Решение уравнений, которые не имеют действительных корней.
Пример: x^2 + 4 = 0 => x^2 = -4 => x = +-sqrt(-4) => x = +-2i.
"""
        },
        '19': {
            'title': 'Окружность в геометрии',
            'explanation': """
================================================================================
|                          Окружность в геометрии                             |
================================================================================

1. Вписанный угол: Угол, вершина которого лежит на окружности, а стороны
   пересекают ее. Он равен половине дуги, на которую опирается.

2. Центральный угол: Угол с вершиной в центре окружности. Он равен дуге,
   на которую опирается.
   Следствие: Вписанный угол равен половине центрального угла, опирающегося
   на ту же дугу.

3. Угол между касательной и хордой: Равен половине дуги, стягиваемой хордой.

4. Описанная окружность (около треугольника): Проходит через все три вершины.
   Центр - точка пересечения серединных перпендикуляров. R = abc/(4S).

5. Вписанная окружность (в треугольник): Касается всех трех сторон.
   Центр - точка пересечения биссектрис. r = S/p, где p - полупериметр.
"""
        },
        '20': {
            'title': 'Координатная геометрия',
            'explanation': """
================================================================================
|                          Координатная геометрия                             |
================================================================================

1. Расстояние между точками A(x1, y1) и B(x2, y2):
   d = sqrt((x2-x1)^2 + (y2-y1)^2)

2. Координаты середины отрезка AB:
   M = ( (x1+x2)/2; (y1+y2)/2 )

3. Уравнение прямой:
   - Общий вид: Ax + By + C = 0
   - С угловым коэффициентом: y = kx + b, где k - тангенс угла наклона.
   - Проходящей через две точки A(x1, y1) и B(x2, y2):
     (x-x1)/(x2-x1) = (y-y1)/(y2-y1)

4. Уравнение окружности:
   (x - x0)^2 + (y - y0)^2 = R^2
   - (x0, y0) - координаты центра.
   - R - радиус.
"""
        },
        '21': {
            'title': 'Интегралы (основы)',
            'explanation': """
================================================================================
|                             Интегралы (основы)                              |
================================================================================

Интегрирование - операция, обратная дифференцированию.

1. Неопределенный интеграл - это совокупность всех первообразных F(x)+C.
   Первообразная F(x) для функции f(x) - это такая функция, что F'(x) = f(x).
   
   Таблица интегралов:
   - integral(x^n)dx = (x^(n+1))/(n+1) + C
   - integral(1/x)dx = ln|x| + C
   - integral(sin(x))dx = -cos(x) + C
   - integral(cos(x))dx = sin(x) + C
   - integral(e^x)dx = e^x + C

2. Определенный интеграл от a до b:
   integral(a,b, f(x)dx) = F(b) - F(a) (формула Ньютона-Лейбница)

Геометрический смысл: Определенный интеграл равен площади криволинейной
трапеции, ограниченной графиком y=f(x), осью OX и прямыми x=a, x=b.
"""
        },
        '22': {
            'title': 'Пределы последовательностей и функций',
            'explanation': """
================================================================================
|                 Пределы последовательностей и функций                       |
================================================================================
Предел - это значение, к которому стремится функция или последовательность.

Обозначение: lim(x->a) f(x) = L

Основные приемы вычисления:
1. Подстановка: Если при подстановке x=a получается число, это и есть ответ.
   lim(x->2) (x+3) = 2+3 = 5.

2. Раскрытие неопределенностей:
   - [0/0]: Разложить числитель и знаменатель на множители и сократить.
     lim(x->1) (x^2-1)/(x-1) = lim(x->1) (x-1)(x+1)/(x-1) = lim(x->1) (x+1) = 2.
   - [inf/inf]: Разделить числитель и знаменатель на старшую степень x.

Замечательные пределы:
1. Первый замечательный предел: lim(x->0) sin(x)/x = 1
2. Второй замечательный предел: lim(x->inf) (1 + 1/x)^x = e
"""
        },
        '23': {
            'title': 'Комбинаторика: Перестановки, Сочетания',
            'explanation': """
================================================================================
|            Комбинаторика: Перестановки, Размещения, Сочетания               |
================================================================================
Комбинаторика отвечает на вопрос "сколькими способами?".

1. Перестановки (P_n): Способы, которыми можно переупорядочить n объектов.
   Порядок важен, все n объектов используются.
   P_n = n! = 1*2*3*...*n
   Пример: Сколькими способами можно расставить 3 книги на полке? P_3 = 3! = 6.

2. Размещения (A_n^k): Способы выбрать k объектов из n и разместить их
   в определенном порядке. Порядок важен.
   A_n^k = n! / (n-k)!
   Пример: Сколькими способами можно выбрать капитана и его заместителя
   из 10 человек? A_10^2 = 10!/8! = 9*10 = 90.

3. Сочетания (C_n^k): Способы выбрать k объектов из n без учета порядка.
   Порядок не важен.
   C_n^k = n! / (k! * (n-k)!)
   Пример: Сколькими способами можно выбрать 2 дежурных из 10 человек?
   C_10^2 = 10!/(2!*8!) = (9*10)/2 = 45.
"""
        },
        '24': {
            'title': 'Бином Ньютона',
            'explanation': """
================================================================================
|                               Бином Ньютона                                 |
================================================================================
Формула для разложения степени двучлена (a+b)^n в многочлен.

(a+b)^n = C_n^0*a^n*b^0 + C_n^1*a^(n-1)*b^1 + ... + C_n^k*a^(n-k)*b^k + ... + C_n^n*a^0*b^n

- C_n^k - биномиальные коэффициенты (число сочетаний).
- Сумма степеней a и b в каждом слагаемом равна n.

Пример: (a+b)^3
= C_3^0*a^3*b^0 + C_3^1*a^2*b^1 + C_3^2*a^1*b^2 + C_3^3*a^0*b^3
= 1*a^3 + 3*a^2*b + 3*a*b^2 + 1*b^3
= a^3 + 3*a^2*b + 3*a*b^2 + b^3 (совпадает с ФСУ)

Треугольник Паскаля - удобный способ находить биномиальные коэффициенты:
      1        (n=0)
     1 1       (n=1)
    1 2 1      (n=2)
   1 3 3 1     (n=3)
  1 4 6 4 1    (n=4)
...
"""
        },
        '25': {
            'title': 'Матрицы и определители (основы)',
            'explanation': """
================================================================================
|                      Матрицы и определители (основы)                        |
================================================================================
Матрица - прямоугольная таблица чисел.

Определитель (детерминант) - число, характеризующее квадратную матрицу.
1. Определитель 2x2:
   |a b|
   |c d| = a*d - b*c

2. Определитель 3x3 (правило Сарруса или "треугольников"):
   |a b c|
   |d e f| = a*e*i + b*f*g + c*d*h - c*e*g - b*d*i - a*f*h
   |g h i|

Применение:
- Решение систем линейных уравнений (метод Крамера).
- Нахождение площади параллелограмма, построенного на векторах.
- Анализ линейных преобразований.
"""
        },
        '26': {
            'title': 'Метод математической индукции',
            'explanation': """
================================================================================
|                        Метод математической индукции                          |
================================================================================
Метод доказательства утверждений для всех натуральных чисел n.

Состоит из трех шагов:
1. База индукции: Проверить, что утверждение верно для n=1 (или
   минимального n).

2. Индукционное предположение: Предположить, что утверждение верно
   для некоторого произвольного натурального n=k.

3. Индукционный шаг: Доказать, что из верности утверждения для n=k
   следует его верность для n=k+1.

Пример: Доказать, что 1 + 2 + ... + n = n*(n+1)/2.
1. База (n=1): 1 = 1*(1+1)/2 => 1 = 1. Верно.
2. Предположение (n=k): 1 + 2 + ... + k = k*(k+1)/2.
3. Шаг (n=k+1): Надо доказать, что 1+...+k+(k+1) = (k+1)*(k+2)/2.
   (1+...+k) + (k+1) = [используем предположение] = k*(k+1)/2 + (k+1)
   = (k+1)*(k/2 + 1) = (k+1)*(k+2)/2. Доказано.
"""
        },
        '27': {
            'title': 'Уравнения с параметром',
            'explanation': """
================================================================================
|                         Уравнения с параметром                               |
================================================================================
Это уравнение, которое содержит, кроме неизвестных (x), еще и буквы (a),
называемые параметрами. Решить такое уравнение - значит найти все его
решения для каждого возможного значения параметра.

Пример: a*x = 5
- Если a != 0, то x = 5/a (единственное решение).
- Если a = 0, то уравнение принимает вид 0*x = 5. Решений нет.
Ответ: при a!=0, x=5/a; при a=0, корней нет.

Пример: x^2 - (a+1)x + a = 0
D = (a+1)^2 - 4a = a^2+2a+1-4a = a^2-2a+1 = (a-1)^2
- Если a=1, D=0, один корень x = (a+1)/2 = 1.
- Если a!=1, D>0, два корня x1 = ((a+1)+(a-1))/2 = a; x2 = ((a+1)-(a-1))/2 = 1.
Ответ: при a=1, x=1; при a!=1, x=1 и x=a.
"""
        },
        '28': {
            'title': 'Геометрические преобразования',
            'explanation': """
================================================================================
|                        Геометрические преобразования                          |
================================================================================
Преобразования, которые переводят одну фигуру в другую.

1. Параллельный перенос на вектор v={a;b}:
   Точка (x,y) переходит в точку (x+a, y+b). Фигура не меняется.

2. Симметрия:
   - Относительно точки O (центральная): Точка A переходит в A' так,
     что O - середина отрезка AA'.
   - Относительно прямой l (осевая): Точка A переходит в A' так,
     что прямая l - серединный перпендикуляр к отрезку AA'.

3. Поворот вокруг точки O на угол a:
   Каждая точка фигуры поворачивается на угол a вокруг центра O.

4. Гомотетия (подобие) с центром O и коэффициентом k:
   Каждая точка A фигуры переходит в точку A' на луче OA так,
   что OA' = |k| * OA. Если k>0, A' на луче OA; если k<0, на доп. луче.
"""
        },
        '29': {
            'title': 'Основы теории множеств',
            'explanation': """
================================================================================
|                          Основы теории множеств                             |
================================================================================
Множество - совокупность различных элементов.

Операции над множествами A и B:
1. Объединение (A U B): Множество, содержащее все элементы, которые
   принадлежат хотя бы одному из множеств A или B.
   Пример: A={1,2}, B={2,3}. A U B = {1,2,3}.

2. Пересечение (A n B): Множество, содержащее все элементы, которые
   принадлежат и A, и B одновременно.
   Пример: A={1,2}, B={2,3}. A n B = {2}.

3. Разность (A \\ B): Множество, содержащее все элементы множества A,
   которые не принадлежат множеству B.
   Пример: A={1,2}, B={2,3}. A \\ B = {1}.

4. Дополнение (A'): Множество всех элементов универсального множества U,
   не входящих в A.
"""
        },
        '30': {
            'title': 'Финансовая математика (Проценты)',
            'explanation': """
================================================================================
|                    Финансовая математика (Проценты)                         |
================================================================================

1. Простые проценты: Проценты начисляются на первоначальную сумму вклада.
   S_n = S_0 * (1 + n*p)
   - S_n - итоговая сумма
   - S_0 - начальная сумма
   - p - процентная ставка за период (в долях, т.е. 5% = 0.05)
   - n - число периодов

2. Сложные проценты (капитализация): Проценты начисляются на текущую
   сумму с уже начисленными ранее процентами.
   S_n = S_0 * (1 + p)^n

Пример: Вклад 1000 руб. под 10% годовых на 2 года.
- Простые проценты: S_2 = 1000 * (1 + 2*0.1) = 1000 * 1.2 = 1200 руб.
- Сложные проценты: S_2 = 1000 * (1 + 0.1)^2 = 1000 * 1.21 = 1210 руб.
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №3 (ТЕМЫ 31-45)
# ==============================================================================
def get_rules_part_3():
    """Возвращает правила с 31 по 45."""
    rules = {
        '31': {
            'title': 'Метод интегрирования по частям',
            'explanation': """
================================================================================
|                     Метод интегрирования по частям                          |
================================================================================
Формула используется, когда подынтегральное выражение можно представить
в виде произведения двух функций u и dv.

Формула: integral(u * dv) = u * v - integral(v * du)

Ключевая задача - правильно выбрать u и dv.
- За u обычно выбирают функцию, которая упрощается при дифференцировании
  (логарифмы, многочлены).
- За dv выбирают оставшуюся часть, от которой легко взять интеграл
  (тригонометрические функции, экспоненты).

Пример: integral(x * cos(x) dx)
1. Выбор:
   u = x      => du = dx
   dv = cos(x)dx => v = integral(cos(x)dx) = sin(x)

2. Применение формулы:
   integral(x*cos(x)dx) = x*sin(x) - integral(sin(x)dx)
                        = x*sin(x) - (-cos(x)) + C
                        = x*sin(x) + cos(x) + C
"""
        },
        '32': {
            'title': 'Метод замены переменной в интеграле',
            'explanation': """
================================================================================
|                  Метод замены переменной в интеграле                        |
================================================================================
Также известен как u-подстановка. Применяется, когда в подынтегральном
выражении есть функция и ее производная.

Алгоритм:
1. Выбрать подходящую замену t = g(x).
2. Найти дифференциал dt = g'(x)dx.
3. Выразить dx = dt / g'(x).
4. Подставить t и dx в исходный интеграл и упростить.
5. Вычислить новый интеграл относительно t.
6. Вернуться к исходной переменной x.

Пример: integral( (2x+1) * (x^2+x)^7 dx )
1. Замена: t = x^2+x
2. Дифференциал: dt = (2x+1)dx
3. Видим, что (2x+1)dx уже есть в интеграле.
4. Подстановка: integral( t^7 dt )
5. Интегрируем: t^8 / 8 + C
6. Обратная замена: (x^2+x)^8 / 8 + C
"""
        },
        '33': {
            'title': 'Правило Лопиталя',
            'explanation': """
================================================================================
|                              Правило Лопиталя                               |
================================================================================
Используется для раскрытия неопределенностей вида [0/0] или [inf/inf]
при вычислении пределов.

Правило: Если предел отношения функций lim(x->a) f(x)/g(x) дает
неопределенность [0/0] или [inf/inf], то этот предел равен пределу
отношения их производных, если он существует.

lim(x->a) f(x)/g(x) = lim(x->a) f'(x)/g'(x)

Пример: lim(x->0) sin(x)/x
1. Подстановка x=0 дает sin(0)/0 = 0/0. Неопределенность.
2. Берем производные:
   f(x) = sin(x) => f'(x) = cos(x)
   g(x) = x      => g'(x) = 1
3. Вычисляем новый предел:
   lim(x->0) cos(x)/1 = cos(0)/1 = 1/1 = 1.
"""
        },
        '34': {
            'title': 'Дифференциальные уравнения (основы)',
            'explanation': """
================================================================================
|                    Дифференциальные уравнения (основы)                        |
================================================================================
Это уравнение, связывающее функцию с ее производными.
Решить ДУ - значит найти все функции, которые ему удовлетворяют.

Пример: ДУ с разделяющимися переменными y' = f(x)*g(y)
Алгоритм решения:
1. Заменить y' на dy/dx.
2. Разделить переменные: собрать все 'y' и 'dy' в одной части,
   а все 'x' и 'dx' - в другой.
3. Проинтегрировать обе части.

Пример: y' = 2x*y
1. dy/dx = 2x*y
2. dy/y = 2x*dx
3. integral(dy/y) = integral(2x*dx)
   ln|y| = x^2 + C
   Это общее решение в неявном виде.
   Можно выразить y: y = e^(x^2+C) = e^(x^2) * e^C = C1 * e^(x^2), где C1=const.
"""
        },
        '35': {
            'title': 'Скалярное и векторное произведение в 3D',
            'explanation': """
================================================================================
|                 Скалярное и векторное произведение в 3D                     |
================================================================================
Пусть a={ax,ay,az}, b={bx,by,bz}

1. Скалярное произведение (результат - число):
   a * b = ax*bx + ay*by + az*bz = |a|*|b|*cos(A)
   - Если a*b = 0, векторы перпендикулярны.

2. Векторное произведение (результат - вектор):
   a x b = {ay*bz-az*by; az*bx-ax*bz; ax*by-ay*bx}
   Этот новый вектор перпендикулярен и вектору 'a', и вектору 'b'.
   Модуль векторного произведения |a x b| = |a|*|b|*sin(A) и равен
   площади параллелограмма, построенного на векторах a и b.
"""
        },
        '36': {
            'title': 'Метод Гаусса для решения СЛАУ',
            'explanation': """
================================================================================
|                     Метод Гаусса для решения СЛАУ                           |
================================================================================
Универсальный метод решения систем линейных алгебраических уравнений.

Алгоритм:
1. Записать расширенную матрицу системы.
2. С помощью элементарных преобразований строк (умножение на число,
   сложение/вычитание строк) привести матрицу к ступенчатому
   (треугольному) виду. Это называется "прямой ход".
3. Из полученной ступенчатой матрицы записать эквивалентную систему
   и решить ее, двигаясь снизу вверх ("обратный ход").

Пример: { x+y=3, 2x-y=0 }
1. Матрица: [ 1  1 | 3 ]
             [ 2 -1 | 0 ]
2. Прямой ход: Вычтем из второй строки первую, умноженную на 2.
   [ 1  1 | 3 ]
   [ 0 -3 | -6 ]
3. Обратный ход. Новая система: { x+y=3, -3y=-6 }
   - Из второго уравнения: y = -6/-3 = 2.
   - Подставляем в первое: x+2=3 => x=1.
   Ответ: (1, 2).
"""
        },
        '37': {
            'title': 'Арифметика остатков (Сравнения по модулю)',
            'explanation': """
================================================================================
|             Арифметика остатков (Сравнения по модулю)                       |
================================================================================
Два целых числа a и b называются сравнимыми по модулю n, если они
дают одинаковый остаток при делении на n.

Запись: a = b (mod n)
Это эквивалентно тому, что (a-b) делится на n без остатка.

Свойства:
Если a=b(mod n) и c=d(mod n), то:
1. a+c = b+d (mod n)
2. a-c = b-d (mod n)
3. a*c = b*d (mod n)

Пример: Найти последнюю цифру числа 7^100.
Это то же самое, что найти остаток от деления 7^100 на 10.
7^1 = 7 (mod 10)
7^2 = 49 = 9 = -1 (mod 10)
7^3 = 7*(-1) = -7 = 3 (mod 10)
7^4 = (-1)^2 = 1 (mod 10)
Теперь используем это:
7^100 = 7^(4*25) = (7^4)^25 = 1^25 = 1 (mod 10).
Ответ: последняя цифра - 1.
"""
        },
        '38': {
            'title': 'Алгоритм Евклида для НОД',
            'explanation': """
================================================================================
|                        Алгоритм Евклида для НОД                             |
================================================================================
Эффективный способ нахождения наибольшего общего делителя (НОД) двух чисел.

Алгоритм:
Пусть даны два числа a и b (a > b).
1. Разделить a на b с остатком: a = b*q + r.
2. Если остаток r равен 0, то НОД(a,b) = b.
3. Если r не равен 0, то заменить пару (a,b) на пару (b,r) и
   вернуться к шагу 1.

Пример: Найти НОД(1071, 462).
1. 1071 = 462 * 2 + 147
2. 462 = 147 * 3 + 21
3. 147 = 21 * 7 + 0
Остаток равен 0. Значит, НОД - это последний ненулевой остаток.
Ответ: НОД(1071, 462) = 21.
"""
        },
        '39': {
            'title': 'Условная вероятность и теорема Байеса',
            'explanation': """
================================================================================
|                 Условная вероятность и теорема Байеса                       |
================================================================================

1. Условная вероятность P(A|B) - вероятность события A при условии,
   что событие B уже произошло.
   P(A|B) = P(A и B) / P(B)
   P(A и B) - вероятность одновременного наступления обоих событий.

2. Теорема Байеса - позволяет "перевернуть" условную вероятность.
   Она связывает P(A|B) с P(B|A).
   P(A|B) = ( P(B|A) * P(A) ) / P(B)

Применение: диагностика заболеваний, фильтрация спама, машинное обучение.
Пример: Если тест на болезнь имеет 99% точность, а болезнь встречается
у 1% населения, какова вероятность, что вы больны при положительном
тесте? Теорема Байеса показывает, что эта вероятность не 99%, а гораздо
ниже из-за редкости болезни.
"""
        },
        '40': {
            'title': 'Статистические меры (среднее, медиана, мода)',
            'explanation': """
================================================================================
|             Статистические меры (среднее, медиана, мода)                    |
================================================================================
Используются для описания набора данных "одним числом".
Пусть дан набор чисел: {1, 2, 2, 3, 5, 8, 10}

1. Среднее арифметическое: Сумма всех чисел, деленная на их количество.
   (1+2+2+3+5+8+10) / 7 = 31 / 7 ~ 4.43

2. Медиана: Значение, которое находится в середине упорядоченного набора.
   - Если количество чисел нечетное, это просто центральное число.
     В наборе {1, 2, 2, [3], 5, 8, 10} медиана = 3.
   - Если количество чисел четное, это среднее арифметическое двух
     центральных чисел.
     В наборе {1, 2, [2, 3], 5, 8} медиана = (2+3)/2 = 2.5.
   Медиана менее чувствительна к выбросам, чем среднее.

3. Мода: Значение, которое встречается в наборе чаще всего.
   В наборе {1, [2, 2], 3, 5, 8, 10} мода = 2.
   Может быть несколько мод или не быть вовсе.
"""
        },
        '41': {
            'title': 'Полярная система координат',
            'explanation': """
================================================================================
|                       Полярная система координат                            |
================================================================================
Альтернатива прямоугольной (декартовой) системе координат.
Положение точки задается двумя числами:
- r (полярный радиус) - расстояние от начала координат (полюса).
- φ (полярный угол) - угол, отсчитываемый от полярной оси
  против часовой стрелки.

Связь с декартовыми координатами (x,y):
- Переход от полярных к декартовым:
  x = r * cos(φ)
  y = r * sin(φ)

- Переход от декартовых к полярным:
  r = sqrt(x^2 + y^2)
  φ = arctg(y/x) (с учетом четверти)

Применение: Удобна для описания фигур, обладающих центральной симметрией,
например, окружностей (r=const) или спиралей (r=a*φ).
"""
        },
        '42': {
            'title': 'Скалярное поле и градиент',
            'explanation': """
================================================================================
|                        Скалярное поле и градиент                            |
================================================================================

1. Скалярное поле - это функция, которая каждой точке пространства
   (например, (x,y)) сопоставляет число (скаляр).
   Пример: U(x,y) = x^2 + y^2. Температура в каждой точке комнаты.

2. Градиент (grad U) - это вектор, составленный из частных производных
   скалярного поля.
   grad U = {∂U/∂x; ∂U/∂y}

   Для U(x,y) = x^2 + y^2:
   ∂U/∂x = 2x
   ∂U/∂y = 2y
   grad U = {2x; 2y}

Свойства градиента:
- Он всегда указывает направление наискорейшего возрастания скалярного поля.
- Его длина (модуль) равна скорости этого возрастания.
Применение: оптимизация, машинное обучение (градиентный спуск), физика.
"""
        },
        '43': {
            'title': 'Формула Муавра для комплексных чисел',
            'explanation': """
================================================================================
|                Формула Муавра для комплексных чисел                       |
================================================================================
Используется для возведения комплексного числа в степень и извлечения корней.
Требует представления числа в тригонометрической форме:
z = r * (cos(φ) + i*sin(φ))
- r - модуль числа, |z| = sqrt(a^2+b^2)
- φ - аргумент числа.

Формула Муавра для возведения в степень n:
z^n = [r*(cos(φ)+i*sin(φ))]^n = r^n * (cos(nφ) + i*sin(nφ))
То есть, модуль возводится в степень, а аргумент умножается на нее.

Пример: (1+i)^10
1. Переводим 1+i в тригонометрическую форму:
   r = sqrt(1^2+1^2) = sqrt(2)
   φ = arctg(1/1) = 45° или pi/4
   1+i = sqrt(2)*(cos(pi/4) + i*sin(pi/4))
2. Применяем формулу Муавра для n=10:
   (1+i)^10 = (sqrt(2))^10 * (cos(10*pi/4) + i*sin(10*pi/4))
            = 2^5 * (cos(5*pi/2) + i*sin(5*pi/2))
            = 32 * (0 + i*1) = 32i.
"""
        },
        '44': {
            'title': 'Ряды и критерии сходимости',
            'explanation': """
================================================================================
|                      Ряды и критерии сходимости                           |
================================================================================
Числовой ряд - это бесконечная сумма вида a1 + a2 + a3 + ...
Ряд называется сходящимся, если сумма его членов стремится к конечному
числу (сумме ряда). В противном случае - расходящимся.

Необходимое условие сходимости:
Если ряд сходится, то его общий член стремится к нулю: lim(n->inf) a_n = 0.
Внимание: обратное неверно! (гармонический ряд 1+1/2+1/3+... расходится)

Признаки сходимости для знакоположительных рядов:
1. Признак сравнения: Если члены нашего ряда меньше членов заведомо
   сходящегося ряда, то наш ряд тоже сходится.
2. Признак Даламбера: Вычисляется предел L = lim(n->inf) a_(n+1)/a_n.
   - Если L < 1, ряд сходится.
   - Если L > 1, ряд расходится.
   - Если L = 1, признак не дает ответа.
3. Признак Коши (радикальный): Вычисляется предел L = lim(n->inf) n_sqrt(a_n).
   Выводы те же, что и у Даламбера.
"""
        },
        '45': {
            'title': 'Деревья в теории графов (основы)',
            'explanation': """
================================================================================
|                   Деревья в теории графов (основы)                         |
================================================================================
Граф - это набор вершин и ребер, соединяющих их.

Дерево - это связный граф, не содержащий циклов.
Свойства дерева:
- Между любыми двумя вершинами существует ровно один простой путь.
- Если в дереве N вершин, то в нем ровно N-1 ребер.
- Удаление любого ребра делает граф несвязным.
- Добавление любого ребра (между уже существующими вершинами) создает цикл.

Применение:
- Файловые системы на компьютере.
- Структуры данных в программировании (бинарные деревья поиска).
- Родословные древа.
- Организационные иерархии.
- Представление молекул в химии.
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №4 (ТЕМЫ 46-60)
# ==============================================================================
def get_rules_part_4():
    """Возвращает 15 правил для 6-8 классов."""
    rules = {
        '46': {
            'title': 'Порядок действий (PEMDAS/BODMAS)',
            'explanation': """
================================================================================
|                      Порядок действий (PEMDAS/BODMAS)                         |
================================================================================
Правило, определяющее последовательность выполнения операций в выражении.

1. P - Parentheses (Скобки): Сначала выполняются действия в скобках.
2. E - Exponents (Степени): Затем возведение в степень.
3. MD - Multiplication and Division (Умножение и Деление): Выполняются
   слева направо в порядке их появления.
4. AS - Addition and Subtraction (Сложение и Вычитание): Выполняются
   слева направо в порядке их появления.

Пример: 5 * (4 - 2) + 6 / 3^2
1. Скобки: (4 - 2) = 2. Выражение: 5 * 2 + 6 / 3^2
2. Степень: 3^2 = 9. Выражение: 5 * 2 + 6 / 9
3. Умножение/Деление (слева направо):
   - 5 * 2 = 10. Выражение: 10 + 6 / 9
   - 6 / 9 ~ 0.67. Выражение: 10 + 0.67
4. Сложение: 10 + 0.67 = 10.67
"""
        },
        '47': {
            'title': 'Свойства арифметических действий',
            'explanation': """
================================================================================
|                   Свойства арифметических действий                          |
================================================================================

1. Коммутативное (переместительное) свойство:
   - Сложение: a + b = b + a
   - Умножение: a * b = b * a
   От перемены мест слагаемых (множителей) результат не меняется.

2. Ассоциативное (сочетательное) свойство:
   - Сложение: (a + b) + c = a + (b + c)
   - Умножение: (a * b) * c = a * (b * c)
   Порядок группировки не влияет на результат.

3. Дистрибутивное (распределительное) свойство:
   a * (b + c) = a * b + a * c
   Позволяет раскрывать скобки.
"""
        },
        '48': {
            'title': 'Действия с обыкновенными дробями',
            'explanation': """
================================================================================
|                   Действия с обыкновенными дробями                        |
================================================================================

1. Сложение/Вычитание:
   - Привести дроби к общему знаменателю.
   - Сложить/вычесть числители, знаменатель оставить тем же.
   Пример: 1/2 + 1/3 = 3/6 + 2/6 = (3+2)/6 = 5/6

2. Умножение:
   - Перемножить числители.
   - Перемножить знаменатели.
   Пример: (2/3) * (4/5) = (2*4)/(3*5) = 8/15

3. Деление:
   - "Перевернуть" вторую дробь (делитель) и умножить на нее.
   Пример: (1/2) / (3/4) = (1/2) * (4/3) = (1*4)/(2*3) = 4/6 = 2/3
"""
        },
        '49': {
            'title': 'Действия с десятичными дробями',
            'explanation': """
================================================================================
|                   Действия с десятичными дробями                          |
================================================================================

1. Сложение/Вычитание: Записать числа "столбиком" так, чтобы запятая
   была под запятой, и выполнить действие как с обычными числами.

2. Умножение: Умножить числа, не обращая внимания на запятые. В результате
   отделить запятой столько цифр справа, сколько их было после запятой
   в обоих множителях вместе.
   Пример: 1.2 * 0.3 => 12*3=36. Всего 2 цифры после запятых. => 0.36

3. Деление:
   - В делителе перенести запятую вправо, чтобы он стал целым числом.
   - В делимом перенести запятую вправо на столько же знаков.
   - Выполнить деление.
"""
        },
        '50': {
            'title': 'Пропорции',
            'explanation': """
================================================================================
|                                  Пропорции                                  |
================================================================================
Пропорция - это равенство двух отношений. a/b = c/d

Основное свойство пропорции:
Произведение крайних членов равно произведению средних членов.
a * d = b * c

Это свойство позволяет находить неизвестный член пропорции.
Пример: x / 4 = 6 / 8
x * 8 = 4 * 6
8x = 24
x = 24 / 8
x = 3
"""
        },
        '51': {
            'title': 'Проценты (основы)',
            'explanation': """
================================================================================
|                             Проценты (основы)                               |
================================================================================
Процент - это одна сотая часть числа. 1% = 1/100 = 0.01

1. Найти процент от числа:
   Нужно число умножить на процент, выраженный в виде дроби.
   Пример: Найти 20% от 150.
   150 * 0.20 = 30

2. Найти число по его проценту:
   Нужно известную часть разделить на процент, выраженный в виде дроби.
   Пример: Найти число, если его 40% равны 60.
   60 / 0.40 = 150

3. Какой процент одно число составляет от другого:
   Нужно первое число разделить на второе и умножить на 100%.
   Пример: Сколько процентов составляет 15 от 50?
   (15 / 50) * 100% = 0.3 * 100% = 30%
"""
        },
        '52': {
            'title': 'Действия с целыми числами (положительные и отрицательные)',
            'explanation': """
================================================================================
|        Действия с целыми числами (положительные и отрицательные)            |
================================================================================
1. Сложение:
   - Два отрицательных: сложить модули и поставить знак минус. (-2)+(-3)=-5
   - С разными знаками: из большего модуля вычесть меньший и поставить
     знак большего по модулю числа. (-7)+4 = -(7-4) = -3.

2. Вычитание: a - b = a + (-b). Заменить вычитание на сложение с
   противоположным числом. 5 - (-3) = 5 + 3 = 8.

3. Умножение и Деление:
   - Одинаковые знаки дают плюс: (-) * (-) = (+)
   - Разные знаки дают минус: (+) * (-) = (-)
   Пример: (-4) * 5 = -20. (-12) / (-3) = 4.
"""
        },
        '53': {
            'title': 'Решение простых линейных уравнений',
            'explanation': """
================================================================================
|                   Решение простых линейных уравнений                       |
================================================================================
Цель - найти значение неизвестного (x).

Основное правило: при переносе числа или слагаемого из одной части
уравнения в другую, его знак меняется на противоположный.

Пример 1: x + 8 = 15
Переносим 8 вправо со знаком минус:
x = 15 - 8
x = 7

Пример 2: 3x - 5 = 10
1. Переносим -5 вправо со знаком плюс: 3x = 10 + 5 => 3x = 15
2. Делим обе части на коэффициент при x (на 3): x = 15 / 3
x = 5
"""
        },
        '54': {
            'title': 'Теорема Пифагора',
            'explanation': """
================================================================================
|                             Теорема Пифагора                                |
================================================================================
Применяется только в прямоугольных треугольниках.

Формулировка: Квадрат длины гипотенузы равен сумме квадратов длин катетов.
c^2 = a^2 + b^2
- c - гипотенуза (сторона, лежащая напротив прямого угла).
- a, b - катеты.

Применение:
1. Найти гипотенузу: c = sqrt(a^2 + b^2)
   Пример: катеты 3 и 4. c = sqrt(3^2 + 4^2) = sqrt(9+16) = sqrt(25) = 5.

2. Найти катет: a = sqrt(c^2 - b^2)
   Пример: гипотенуза 13, катет 12. a = sqrt(13^2-12^2) = sqrt(169-144) = sqrt(25)=5.
"""
        },
        '55': {
            'title': 'Периметр и площадь базовых фигур',
            'explanation': """
================================================================================
|                   Периметр и площадь базовых фигур                          |
================================================================================
1. Периметр (P) - сумма длин всех сторон.
2. Площадь (S) - пространство внутри фигуры.

- Прямоугольник (стороны a, b):
  P = 2 * (a + b)
  S = a * b

- Квадрат (сторона a):
  P = 4 * a
  S = a^2

- Треугольник (стороны a, b, c):
  P = a + b + c
  S = (1/2) * основание * высота
"""
        },
        '56': {
            'title': 'Формулы для круга',
            'explanation': """
================================================================================
|                            Формулы для круга                              |
================================================================================
- R - радиус (отрезок от центра до любой точки на окружности).
- D - диаметр (отрезок, проходящий через центр, D = 2R).
- pi (Пи) - математическая константа, примерно равна 3.14159.

1. Длина окружности (C):
   C = 2 * pi * R   или   C = pi * D

2. Площадь круга (S):
   S = pi * R^2

Пример: радиус круга 10 см.
Длина окружности: C = 2 * pi * 10 = 20*pi см (~62.8 см)
Площадь круга: S = pi * 10^2 = 100*pi см^2 (~314 см^2)
"""
        },
        '57': {
            'title': 'Виды углов',
            'explanation': """
================================================================================
|                               Виды углов                                  |
================================================================================

1. По величине:
   - Острый: < 90°
   - Прямой: = 90°
   - Тупой: > 90° и < 180°
   - Развернутый: = 180°

2. По взаимному расположению:
   - Смежные углы: Имеют общую сторону, а две другие - продолжения друг
     друга. Сумма смежных углов всегда 180°.
   - Вертикальные углы: Образуются при пересечении двух прямых.
     Вертикальные углы равны друг другу.
"""
        },
        '58': {
            'title': 'График линейной функции (y = kx + b)',
            'explanation': """
================================================================================
|                   График линейной функции (y = kx + b)                      |
================================================================================
Графиком является прямая линия.

- b (свободный член): точка пересечения прямой с осью OY.
- k (угловой коэффициент): отвечает за наклон прямой.
  - k > 0: прямая "идет вверх" (возрастает).
  - k < 0: прямая "идет вниз" (убывает).
  - k = 0: прямая горизонтальна (y = b).

Как построить график:
Достаточно найти координаты двух любых точек.
Пример: y = 2x - 1
1. Берем x = 0. y = 2*0 - 1 = -1. Точка (0, -1).
2. Берем x = 2. y = 2*2 - 1 = 3. Точка (2, 3).
Отмечаем эти две точки на координатной плоскости и проводим через них прямую.
"""
        },
        '59': {
            'title': 'Стандартный вид числа (Научная нотация)',
            'explanation': """
================================================================================
|              Стандартный вид числа (Научная нотация)                        |
================================================================================
Используется для записи очень больших или очень маленьких чисел.
Число представляется в виде: a * 10^n
- a (мантисса): число от 1 (включительно) до 10 (не включительно).
- n (порядок): целое число.

Примеры:
- Большое число: 345,000,000
  Нужно перенести запятую так, чтобы слева осталась одна цифра.
  Перенесли на 8 знаков влево.
  3.45 * 10^8

- Маленькое число: 0.000078
  Переносим запятую вправо.
  Перенесли на 5 знаков вправо.
  7.8 * 10^(-5)
"""
        },
        '60': {
            'title': 'Формула простых процентов',
            'explanation': """
================================================================================
|                        Формула простых процентов                            |
================================================================================
Используется в задачах на вклады или кредиты, когда проценты начисляются
только на первоначальную сумму.

Формула итоговой суммы:
S = P * (1 + (i/100) * t)
- S - итоговая сумма.
- P - первоначальная сумма (principal).
- i - годовая процентная ставка.
- t - количество лет.

Пример: В банк положили 5000 рублей под 8% годовых на 3 года.
P = 5000
i = 8
t = 3
S = 5000 * (1 + (8/100) * 3)
S = 5000 * (1 + 0.08 * 3)
S = 5000 * (1 + 0.24)
S = 5000 * 1.24 = 6200 рублей.
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №5 (ТЕМЫ 61-75)
# ==============================================================================
def get_rules_part_5():
    """Возвращает 15 правил для 4-6 классов."""
    rules = {
        '61': {
            'title': 'Таблица умножения (принципы)',
            'explanation': """
================================================================================
|                       Таблица умножения (принципы)                            |
================================================================================
Умножение - это многократное сложение одинаковых слагаемых.
Запись 4 * 3 означает "взять число 4 три раза": 4 + 4 + 4 = 12.

Ключевые принципы:
1. Переместительное свойство: 4 * 3 = 3 * 4. Результат не меняется.
2. Умножение на 1: Любое число, умноженное на 1, равно самому себе (a * 1 = a).
3. Умножение на 0: Любое число, умноженное на 0, равно нулю (a * 0 = 0).
4. Умножение на 10: Чтобы умножить число на 10, нужно приписать к нему
   справа один ноль (например, 12 * 10 = 120).

Таблица Пифагора - это квадрат, в котором на пересечении строки и столбца
находится их произведение. Ее знание - основа для всех дальнейших вычислений.
"""
        },
        '62': {
            'title': 'Деление с остатком',
            'explanation': """
================================================================================
|                            Деление с остатком                               |
================================================================================
Используется, когда одно число (делимое) не делится нацело на другое (делитель).
Формула: a = b * q + r
- a - делимое
- b - делитель
- q - неполное частное (сколько раз делитель "помещается" в делимом)
- r - остаток (всегда меньше делителя, r < b)

Пример: 17 разделить на 5.
1. Сколько раз 5 помещается в 17? 3 раза (5*3=15). Значит, q = 3.
2. Какой остаток? 17 - 15 = 2. Значит, r = 2.
3. Проверка: 17 = 5 * 3 + 2.
Ответ: 17 / 5 = 3 (остаток 2).
"""
        },
        '63': {
            'title': 'Нахождение части от числа и числа по его части',
            'explanation': """
================================================================================
|             Нахождение части от числа и числа по его части                  |
================================================================================
Эти задачи часто решаются с помощью дробей.

1. Нахождение части (дроби) от числа:
   Чтобы найти часть от числа, нужно это число умножить на дробь.
   Пример: Найти 2/5 от числа 30.
   30 * (2/5) = (30*2)/5 = 60/5 = 12.

2. Нахождение целого числа по его части:
   Чтобы найти число по его известной части, нужно эту часть разделить на дробь.
   Пример: Найти число, если его 3/4 равны 21.
   21 / (3/4) = 21 * (4/3) = (21*4)/3 = 84/3 = 28.
"""
        },
        '64': {
            'title': 'Признаки делимости чисел',
            'explanation': """
================================================================================
|                        Признаки делимости чисел                             |
================================================================================
Правила, позволяющие быстро определить, делится ли число нацело.

- на 2: если последняя цифра числа четная (0, 2, 4, 6, 8).
- на 3: если сумма цифр числа делится на 3.
  (Пример: 123 -> 1+2+3=6. 6 делится на 3, значит и 123 делится).
- на 4: если число, образованное двумя последними цифрами, делится на 4.
  (Пример: 316 -> 16 делится на 4, значит и 316 делится).
- на 5: если число оканчивается на 0 или 5.
- на 6: если число делится и на 2, и на 3 одновременно.
- на 9: если сумма цифр числа делится на 9.
  (Пример: 729 -> 7+2+9=18. 18 делится на 9, значит и 729 делится).
- на 10: если число оканчивается на 0.
"""
        },
        '65': {
            'title': 'Наибольший общий делитель (НОД) и Наименьшее общее кратное (НОК)',
            'explanation': """
================================================================================
|                               НОД и НОК                                   |
================================================================================
1. Наибольший общий делитель (НОД): самое большое число, на которое
   делятся оба данных числа.
   Алгоритм:
   - Разложить оба числа на простые множители.
   - Выписать общие для обоих разложений множители.
   - Перемножить их.
   Пример: НОД(12, 18)
   12 = 2 * 2 * 3
   18 = 2 * 3 * 3
   Общие множители: 2, 3. НОД = 2 * 3 = 6.

2. Наименьшее общее кратное (НОК): самое маленькое число, которое
   делится на оба данных числа.
   Алгоритм:
   - Разложить оба числа на простые множители.
   - Выписать множители первого числа.
   - Добавить к ним недостающие множители из второго числа.
   - Перемножить их.
   Пример: НОК(12, 18)
   Множители 12: 2, 2, 3.
   Недостающие из 18: еще одна 3.
   НОК = 2 * 2 * 3 * 3 = 36.
"""
        },
        '66': {
            'title': 'Сравнение дробей',
            'explanation': """
================================================================================
|                             Сравнение дробей                                |
================================================================================
1. С одинаковыми знаменателями:
   Больше та дробь, у которой числитель больше.
   Пример: 5/7 > 3/7

2. С одинаковыми числителями:
   Больше та дробь, у которой знаменатель меньше.
   Пример: 2/5 > 2/9 (кусок пиццы будет больше, если ее делить на 5, а не на 9).

3. С разными числителями и знаменателями:
   Нужно привести дроби к общему знаменателю и сравнить их числители.
   Пример: Сравнить 3/4 и 5/6.
   Общий знаменатель - 12.
   3/4 = 9/12
   5/6 = 10/12
   Так как 10/12 > 9/12, то 5/6 > 3/4.
"""
        },
        '67': {
            'title': 'Округление чисел',
            'explanation': """
================================================================================
|                              Округление чисел                               |
================================================================================
Правило:
1. Найти разряд, до которого нужно округлить.
2. Посмотреть на цифру, стоящую справа от этого разряда.
3. Если эта цифра 5, 6, 7, 8 или 9, то цифру в округляемом разряде
   увеличиваем на 1, а все последующие цифры заменяем нулями (или отбрасываем
   в дробной части).
4. Если эта цифра 0, 1, 2, 3 или 4, то цифру в округляемом разряде
   оставляем без изменений, а все последующие заменяем нулями.

Примеры:
- Округлить 178 до десятков:
  Смотрим на 8. Она >= 5, значит увеличиваем 7 на 1. => 180.
- Округлить 341 до десятков:
  Смотрим на 1. Она < 5, значит 4 не меняем. => 340.
- Округлить 2.57 до десятых:
  Смотрим на 7. Она >= 5, значит 5 увеличиваем на 1. => 2.6.
"""
        },
        '68': {
            'title': 'Задачи на движение (S=V*t)',
            'explanation': """
================================================================================
|                       Задачи на движение (S = V * t)                          |
================================================================================
Основная формула, связывающая расстояние, скорость и время.

- S: Расстояние (Distance)
- V: Скорость (Velocity)
- t: Время (time)

Из этой формулы можно выразить любую величину:
- Расстояние: S = V * t
- Скорость:   V = S / t
- Время:      t = S / V

Важно следить за совпадением единиц измерения (км и км/ч, метры и м/с).

Пример: Автомобиль ехал 3 часа со скоростью 60 км/ч. Какое расстояние он проехал?
S = 60 км/ч * 3 ч = 180 км.
"""
        },
        '69': {
            'title': 'Единицы измерения и их перевод',
            'explanation': """
================================================================================
|                    Единицы измерения и их перевод                         |
================================================================================
Длина:
1 км = 1000 м
1 м = 100 см = 1000 мм
1 см = 10 мм

Масса:
1 т = 1000 кг
1 кг = 1000 г

Время:
1 час = 60 мин
1 мин = 60 сек
1 сутки = 24 часа

Площадь:
1 км^2 = 1,000,000 м^2
1 м^2 = 10,000 см^2
1 Га (гектар) = 100 м * 100 м = 10,000 м^2

Объем:
1 м^3 = 1,000,000 см^3
1 л (литр) = 1 дм^3 = 1000 см^3
"""
        },
        '70': {
            'title': 'Среднее арифметическое',
            'explanation': """
================================================================================
|                         Среднее арифметическое                              |
================================================================================
Среднее арифметическое нескольких чисел - это сумма этих чисел,
деленная на их количество.

Формула: (a1 + a2 + ... + an) / n

Пример 1: Найти среднее арифметическое чисел 10, 12, 17.
Сумма = 10 + 12 + 17 = 39
Количество = 3
Среднее = 39 / 3 = 13.

Пример 2: Средний рост пяти игроков команды 190 см.
Это значит, что если бы все игроки были одного роста, он был бы 190 см.
Общий рост всех игроков = 190 * 5 = 950 см.
"""
        },
        '71': {
            'title': 'Что такое переменная. Упрощение выражений',
            'explanation': """
================================================================================
|             Что такое переменная. Упрощение выражений                     |
================================================================================
Переменная - это буква (например, x, a, y), которая используется для
обозначения неизвестного или изменяющегося числа.

Упрощение выражений - это приведение его к более простому виду.
Основной прием - приведение подобных слагаемых.
Подобные слагаемые - это слагаемые с одинаковой буквенной частью.

Пример: Упростить выражение 5x + 3 - 2x + 7
1. Группируем слагаемые с 'x' и без 'x':
   (5x - 2x) + (3 + 7)
2. Выполняем действия в каждой группе:
   (5-2)x + 10
   3x + 10
Дальнейшее упрощение невозможно, так как 3x и 10 не являются подобными.
"""
        },
        '72': {
            'title': 'Параллельные и перпендикулярные прямые',
            'explanation': """
================================================================================
|                Параллельные и перпендикулярные прямые                       |
================================================================================

1. Параллельные прямые:
   Две прямые на плоскости, которые никогда не пересекаются, сколько бы их
   ни продолжали. Обозначаются знаком ||. (a || b)

2. Перпендикулярные прямые:
   Две прямые, которые пересекаются под прямым углом (90°).
   Обозначаются знаком ⊥. (c ⊥ d)

Свойства:
- Через точку, не лежащую на прямой, можно провести только одну прямую,
  параллельную данной (аксиома параллельности).
- Если две прямые перпендикулярны третьей, то они параллельны между собой.
"""
        },
        '73': {
            'title': 'Понятие координаты и координатной прямой',
            'explanation': """
================================================================================
|              Понятие координаты и координатной прямой                       |
================================================================================
Координатная прямая - это прямая линия, на которой выбраны:
1. Начало отсчета (точка О, соответствующая числу 0).
2. Положительное направление (указывается стрелкой).
3. Единичный отрезок (расстояние от 0 до 1), который задает масштаб.

Каждой точке на этой прямой соответствует одно-единственное число - ее
координата.
- Справа от нуля расположены положительные числа.
- Слева от нуля - отрицательные числа.

Расстояние между двумя точками на координатной прямой равно модулю
разности их координат.
Пример: Расстояние между точками A(-2) и B(5) равно |5 - (-2)| = |5+2| = 7.
"""
        },
        '74': {
            'title': 'Разряды чисел (единицы, десятки, сотни)',
            'explanation': """
================================================================================
|                Разряды чисел (единицы, десятки, сотни)                    |
================================================================================
Наша система счисления - позиционная. Это значит, что значение цифры
зависит от ее места (позиции) в числе.

Разряды читаются справа налево:
- 1-й разряд: единицы
- 2-й разряд: десятки
- 3-й разряд: сотни
- 4-й разряд: тысячи
... и так далее.

Пример: число 4,732
- 2 - это 2 единицы (2 * 1)
- 3 - это 3 десятка (3 * 10)
- 7 - это 7 сотен (7 * 100)
- 4 - это 4 тысячи (4 * 1000)

Число можно представить в виде суммы разрядных слагаемых:
4732 = 4000 + 700 + 30 + 2
"""
        },
        '75': {
            'title': 'Римские цифры',
            'explanation': """
================================================================================
|                               Римские цифры                                 |
================================================================================
Система счисления, использовавшаяся в Древнем Риме.

Основные символы:
I = 1
V = 5
X = 10
L = 50
C = 100
D = 500
M = 1000

Правила:
1. Если меньшая цифра стоит справа от большей, они складываются.
   VI = 5 + 1 = 6
   XV = 10 + 5 = 15
   LXX = 50 + 10 + 10 = 70

2. Если меньшая цифра стоит слева от большей, она вычитается из большей.
   IV = 5 - 1 = 4
   IX = 10 - 1 = 9
   XC = 100 - 10 = 90
   CM = 1000 - 100 = 900

Пример: 1998
1000 = M
900 = CM
90 = XC
8 = VIII
Результат: MCMXCVIII
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №6 (ТЕМЫ 76-90)
# ==============================================================================
def get_rules_part_6():
    """Возвращает 15 правил для 2-4 классов."""
    rules = {
        '76': {
            'title': 'Сложение и вычитание в столбик',
            'explanation': """
================================================================================
|                     Сложение и вычитание в столбик                           |
================================================================================
Метод для работы с многозначными числами.

1. Записать числа друг под другом так, чтобы единицы были под единицами,
   десятки под десятками и т.д.

2. Сложение:
   - Начать сложение с самого правого разряда (единиц).
   - Если сумма в разряде больше 9 (например, 14), то единицу (4) пишем
     под разрядом, а десяток (1) "переносим в уме" в следующий разряд слева.

3. Вычитание:
   - Начать вычитание с разряда единиц.
   - Если верхняя цифра меньше нижней, нужно "занять" единицу у старшего
     разряда слева. Эта "занятая" единица равна 10 в текущем разряде.
"""
        },
        '77': {
            'title': 'Компоненты сложения и вычитания',
            'explanation': """
================================================================================
|                 Компоненты сложения и вычитания                             |
================================================================================
Знание названий компонентов помогает понимать текстовые задачи.

Сложение:
слагаемое + слагаемое = сумма
  (5      +      3      =    8)

Вычитание:
уменьшаемое - вычитаемое = разность
    (10     -      4      =     6)

Правила для нахождения неизвестного компонента:
- Чтобы найти неизвестное слагаемое, нужно из суммы вычесть известное слагаемое.
- Чтобы найти уменьшаемое, нужно к разности прибавить вычитаемое.
- Чтобы найти вычитаемое, нужно из уменьшаемого вычесть разность.
"""
        },
        '78': {
            'title': 'Компоненты умножения и деления',
            'explanation': """
================================================================================
|                  Компоненты умножения и деления                             |
================================================================================

Умножение:
множитель * множитель = произведение
   (6      *      5      =      30)

Деление:
делимое / делитель = частное
  (20   /     4     =    5)
"""
        },
        '79': {
            'title': 'Связь между сложением и вычитанием',
            'explanation': """
================================================================================
|                  Связь между сложением и вычитанием                         |
================================================================================
Сложение и вычитание - это взаимообратные операции.
Это значит, что одно действие можно проверить другим.

Если a + b = c, то справедливы два равенства:
1. c - a = b
2. c - b = a

Пример:
Если 7 + 5 = 12, то:
- 12 - 7 = 5
- 12 - 5 = 7

Это свойство используется для решения простых уравнений и проверки вычислений.
"""
        },
        '80': {
            'title': 'Связь между умножением и делением',
            'explanation': """
================================================================================
|                   Связь между умножением и делением                         |
================================================================================
Умножение и деление - это также взаимообратные операции.

Если a * b = c (и a,b не равны 0), то справедливы два равенства:
1. c / a = b
2. c / b = a

Пример:
Если 8 * 4 = 32, то:
- 32 / 8 = 4
- 32 / 4 = 8

Это помогает находить неизвестные множители и проверять правильность
выполнения действий.
"""
        },
        '81': {
            'title': 'Простые уравнения с неизвестным (x)',
            'explanation': """
================================================================================
|                  Простые уравнения с неизвестным (x)                        |
================================================================================
Уравнение - это равенство, в котором есть неизвестное число, обозначенное
буквой (чаще всего x). Решить уравнение - значит найти это число.

Используются правила нахождения неизвестных компонентов (см. темы 77, 78).

Пример 1: x + 15 = 25
'x' - неизвестное слагаемое.
x = 25 - 15
x = 10

Пример 2: 3 * x = 18
'x' - неизвестный множитель.
x = 18 / 3
x = 6
"""
        },
        '82': {
            'title': 'Плоские геометрические фигуры',
            'explanation': """
================================================================================
|                     Плоские геометрические фигуры                           |
================================================================================
Фигуры, которые можно нарисовать на листе бумаги.

- Круг: фигура, все точки которой находятся на одинаковом расстоянии
  от центра.
- Квадрат: прямоугольник, у которого все стороны равны.
- Прямоугольник: четырехугольник, у которого все углы прямые (90°).
  Противоположные стороны равны.
- Треугольник: фигура с тремя углами и тремя сторонами.
- Овал: "сплюснутый" круг.
- Ромб: четырехугольник, у которого все стороны равны.
"""
        },
        '83': {
            'title': 'Объемные геометрические фигуры',
            'explanation': """
================================================================================
|                     Объемные геометрические фигуры                          |
================================================================================
Фигуры, которые занимают место в пространстве.

- Куб: объемная фигура, у которой все 6 граней - одинаковые квадраты.
- Шар: объемная фигура, похожая на мяч. Все точки на ее поверхности
  равноудалены от центра.
- Цилиндр: фигура, похожая на консервную банку. Имеет два круглых
  основания.
- Конус: фигура, похожая на колпак. Имеет одно круглое основание и
  вершину.
- Пирамида: имеет основание (многоугольник) и треугольные грани,
  сходящиеся в одной вершине.
"""
        },
        '84': {
            'title': 'Что такое периметр?',
            'explanation': """
================================================================================
|                             Что такое периметр?                               |
================================================================================
Периметр (P) - это общая длина всех сторон фигуры.
Представьте, что вам нужно поставить забор вокруг участка. Длина этого
забора и будет периметром.

Как найти периметр:
Нужно просто сложить длины всех сторон.

- Для треугольника со сторонами a,b,c: P = a + b + c
- Для квадрата со стороной a: P = a + a + a + a = 4 * a
- Для прямоугольника со сторонами a,b: P = a + b + a + b = 2 * (a + b)
"""
        },
        '85': {
            'title': 'Что такое площадь?',
            'explanation': """
================================================================================
|                              Что такое площадь?                               |
================================================================================
Площадь (S) - это величина, показывающая, сколько места фигура занимает
на плоскости.

Площадь измеряется в квадратных единицах (см^2, м^2).
Представьте, что вы покрываете пол квадратной плиткой. Количество плиток,
которое поместится на пол, и есть его площадь.

Как найти площадь прямоугольника:
Нужно умножить его длину на ширину.
S = длина * ширина

Пример: Площадь комнаты длиной 5 м и шириной 3 м.
S = 5 м * 3 м = 15 м^2 (15 квадратных метров).
"""
        },
        '86': {
            'title': 'Сравнение чисел (<, >, =)',
            'explanation': """
================================================================================
|                        Сравнение чисел (<, >, =)                            |
================================================================================
Знаки сравнения показывают, какое из чисел больше, меньше или они равны.

- > : "больше чем"
- < : "меньше чем"
- = : "равно"

Простое правило: "голодный крокодил" (знак) всегда открывает рот
в сторону большего числа.

Примеры:
10 > 7 (10 больше чем 7)
5 < 12 (5 меньше чем 12)
25 = 25 (25 равно 25)

При сравнении многозначных чисел сначала сравнивают количество цифр
(у кого больше, то число и больше), а если оно одинаково - сравнивают
цифры по разрядам слева направо.
"""
        },
        '87': {
            'title': 'Четные и нечетные числа',
            'explanation': """
================================================================================
|                         Четные и нечетные числа                             |
================================================================================
1. Четные числа:
   Это числа, которые делятся на 2 без остатка.
   Они всегда оканчиваются на 0, 2, 4, 6 или 8.
   Примеры: 12, 46, 100, 34.

2. Нечетные числа:
   Это числа, которые при делении на 2 дают остаток 1.
   Они всегда оканчиваются на 1, 3, 5, 7 или 9.
   Примеры: 1, 17, 23, 105.

Свойства:
- Четное + Четное = Четное
- Нечетное + Нечетное = Четное
- Четное + Нечетное = Нечетное
- Четное * Любое = Четное
"""
        },
        '88': {
            'title': 'Решение текстовых задач (по шагам)',
            'explanation': """
================================================================================
|                  Решение текстовых задач (по шагам)                         |
================================================================================
Алгоритм, который помогает решить практически любую задачу:

1. Прочитай внимательно: Прочитай условие задачи 2-3 раза, чтобы
   полностью понять, о чем идет речь.

2. Найди вопрос: Четко определи, что нужно найти в задаче.

3. Найди данные: Выпиши все числа (данные), которые даны в условии.

4. Составь план: Подумай, какие действия (сложение, вычитание и т.д.)
   нужно выполнить, чтобы ответить на вопрос. Иногда нужно несколько действий.

5. Реши: Выполни все действия по плану.

6. Запиши ответ: Напиши полный и ясный ответ на вопрос задачи.
"""
        },
        '89': {
            'title': 'Доли (половина, треть, четверть)',
            'explanation': """
================================================================================
|                 Доли (половина, треть, четверть)                            |
================================================================================
Доля - это одна или несколько равных частей, на которые разделили целое.

- Половина (1/2): Целое разделили на 2 равные части и взяли одну.
- Треть (1/3): Целое разделили на 3 равные части и взяли одну.
- Четверть (1/4): Целое разделили на 4 равные части и взяли одну.

Число под чертой (знаменатель) показывает, на сколько частей разделили.
Число над чертой (числитель) показывает, сколько таких частей взяли.

Пример: Торт разрезали на 8 кусков. Петя съел 3 куска.
Говорят, что Петя съел 3/8 (три восьмых) торта.
"""
        },
        '90': {
            'title': 'Определение времени по часам',
            'explanation': """
================================================================================
|                      Определение времени по часам                           |
================================================================================
На аналоговом циферблате есть две главные стрелки.

1. Маленькая толстая стрелка - ЧАСОВАЯ.
   Она движется медленно и показывает, какой сейчас час.

2. Большая тонкая стрелка - МИНУТНАЯ.
   Она движется быстрее и показывает минуты.
   Чтобы узнать минуты, нужно число, на которое она указывает, умножить на 5.
   - Указывает на 1 -> 5 минут
   - Указывает на 3 -> 15 минут (четверть часа)
   - Указывает на 6 -> 30 минут (полчаса)
   - Указывает на 12 -> 00 минут (начало нового часа)

Пример: Часовая стрелка чуть отошла от цифры 4, а минутная указывает на 2.
Часы: 4. Минуты: 2*5=10. Время: 4 часа 10 минут.
"""
        }
    }
    return rules

# ==============================================================================
#                        БЛОК ПРАВИЛ №7 (ТЕМЫ 91-105)
# ==============================================================================
def get_rules_part_7():
    """Возвращает 15 правил для дошкольников и 1-го класса."""
    rules = {
        '91': {
            'title': 'Учимся считать до 10',
            'explanation': """
================================================================================
|                          Учимся считать до 10                                |
================================================================================
Счет - это как шаги по лесенке. Каждый следующий шаг - это новое число.
Давай посчитаем яблоки!

1 - одно яблоко       (*)
2 - два яблока        (* *)
3 - три яблока        (* * *)
4. - четыре яблока     (* * * *)
5 - пять яблок       (* * * * *)
6 - шесть яблок      (* * * * *)
                      (*)
7 - семь яблок       (* * * * *)
                      (* *)
8 - восемь яблок     (* * * * *)
                      (* * *)
9 - девять яблок     (* * * * *)
                      (* * * *)
10 - десять яблок    (* * * * *)
                      (* * * * *)

Попробуй посчитать свои пальцы на руках! Их ровно 10.
"""
        },
        '92': {
            'title': 'Что такое число? (Цифра и количество)',
            'explanation': """
================================================================================
|               Что такое число? (Цифра и количество)                         |
================================================================================
Нужно различать ДВА понятия:

1. ЦИФРА - это просто значок, как буква.
   Цифр всего десять: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9.

2. ЧИСЛО - это идея о количестве предметов.
   Число можно записать с помощью одной или нескольких цифр.

Пример:
- У нас есть ТРИ конфеты. Это количество.
- Мы записываем это с помощью цифры "3".
- Число "12" записывается с помощью двух цифр: "1" и "2".
"""
        },
        '93': {
            'title': 'Знакомство с нулем (0)',
            'explanation': """
================================================================================
|                        Знакомство с нулем (0)                               |
================================================================================
Ноль (0) - это особенное число. Оно означает "ничего" или "пусто".

- Если у тебя в корзине 3 яблока, а ты съел все 3, то в корзине
  осталось 0 яблок.

Свойства нуля:
- Любое число + 0 = то же самое число (5 + 0 = 5)
- Любое число - 0 = то же самое число (8 - 0 = 8)
- Любое число * 0 = ноль! (7 * 0 = 0)
- На ноль делить НЕЛЬЗЯ! Это очень важное правило.
"""
        },
        '94': {
            'title': 'Простое сложение (+)',
            'explanation': """
================================================================================
|                           Простое сложение (+)                              |
================================================================================
Сложение - это когда мы собираем предметы вместе и считаем,
сколько их стало всего. Знак сложения - "плюс" (+).

Пример: У Маши было 2 яблока, а у Пети - 3 яблока.
Сколько яблок у них вместе?

(* *) + (* * *) = (* * * * *)
  2   +     3   =     5

Мы сложили две группы в одну большую.
"""
        },
        '95': {
            'title': 'Простое вычитание (-)',
            'explanation': """
================================================================================
|                          Простое вычитание (-)                              |
================================================================================
Вычитание - это когда мы забираем предметы из группы и считаем,
сколько осталось. Знак вычитания - "минус" (-).

Пример: На столе лежало 5 конфет. Одну конфету съели.
Сколько конфет осталось?

(* * * * *) - (*) = (* * * *)
     5      -  1  =     4

Мы убрали часть из целого.
"""
        },
        '96': {
            'title': 'Сравнение: Больше, Меньше, Равно (>, <, =)',
            'explanation': """
================================================================================
|               Сравнение: Больше, Меньше, Равно (>, <, =)                    |
================================================================================
Эти знаки помогают нам сравнивать группы предметов.
Представь, что знак - это голодный крокодил, который всегда
открывает рот в сторону, где еды БОЛЬШЕ.

1. Больше (>):
   (* * *) > ( *)
      3    >   1  (три больше одного)

2. Меньше (<):
   (* *) < (* * * * *)
     2   <      5     (два меньше пяти)

3. Равно (=):
   (* * *) = (* * *)
      3    =    3     (группы одинаковые)
"""
        },
        '97': {
            'title': 'Знакомимся с формами',
            'explanation': """
================================================================================
|                         Знакомимся с формами                              |
================================================================================
Все предметы вокруг нас имеют какую-то форму. Вот основные:

    ***
   *   *    <-- Круг. Он круглый, как мячик или солнце.
    ***       У него нет углов.


   *****
   *   *    <-- Квадрат. У него 4 одинаковые стороны и 4 прямых угла,
   *****       как у коробки.


      *
     * *    <-- Треугольник. У него 3 стороны и 3 угла, как у крыши
    *****      домика.
"""
        },
        '98': {
            'title': 'Что такое узор (простые последовательности)',
            'explanation': """
================================================================================
|             Что такое узор (простые последовательности)                     |
================================================================================
Узор или последовательность - это когда предметы или фигуры повторяются
в определенном порядке.

Твоя задача - понять этот порядок и продолжить его.

Пример 1: Продолжи ряд фигур.
Круг, Квадрат, Круг, Квадрат, ... Какая фигура следующая?
Ответ: Круг.

Пример 2: Продолжи ряд чисел.
1, 2, 3, 1, 2, 3, ... Какое число следующее?
Ответ: 1.

Пример 3: Найди лишнее.
Красный, Синий, Зеленый, Собака, Желтый.
Лишнее - Собака, потому что все остальное - цвета.
"""
        },
        '99': {
            'title': 'Числовая прямая (до 10)',
            'explanation': """
================================================================================
|                      Числовая прямая (до 10)                                |
================================================================================
Это линейка, которая помогает нам считать и сравнивать числа.

<--|----|----|----|----|----|----|----|----|----|----|-->
   0    1    2    3    4    5    6    7    8    9   10

- Чем правее число на прямой, тем оно БОЛЬШЕ. (7 > 4)
- Чем левее число, тем оно МЕНЬШЕ. (2 < 6)

Сложение - это шаги ВПРАВО.
Пример: 3 + 2. Встаем на 3, делаем 2 шага вправо -> попадаем в 5.

Вычитание - это шаги ВЛЕВО.
Пример: 8 - 4. Встаем на 8, делаем 4 шага влево -> попадаем в 4.
"""
        },
        '100': {
            'title': 'Счет десятками',
            'explanation': """
================================================================================
|                             Счет десятками                                  |
================================================================================
Считать большими группами гораздо быстрее!
Представь, что мы считаем не по одной ягодке, а целыми лукошками,
в каждом из которых по 10 ягодок.

10 - десять (одно лукошко)
20 - двадцать (два лукошка)
30 - тридцать (три лукошка)
40 - сорок
50 - пятьдесят
60 - шестьдесят
70 - семьдесят
80 - восемьдесят
90 - девяносто
100 - сто (десять лукошек!)
"""
        },
        '101': {
            'title': 'Лево и Право',
            'explanation': """
================================================================================
|                              Лево и Право                                   |
================================================================================
Умение различать левую и правую сторону очень важно.

Простой способ запомнить:
Большинство людей пишут и рисуют ПРАВОЙ рукой. Посмотри, какой рукой
ты держишь карандаш - скорее всего, это твоя правая рука.
Другая рука - ЛЕВАЯ.

Пример:
Посмотри на свои ботинки. Один - левый, другой - правый.
Если их перепутать, ноге будет неудобно.

      (^_^)
      / | \\
     /  |  \\
   ЛЕВО | ПРАВО
        |
"""
        },
        '102': {
            'title': 'Сравнение по размеру (большой, маленький, высокий, низкий)',
            'explanation': """
================================================================================
|       Сравнение по размеру (большой, маленький, высокий, низкий)            |
================================================================================
Мы можем сравнивать предметы не только по количеству, но и по размеру.

- Большой / Маленький:
  Слон - большой. Мышка - маленькая.

- Высокий / Низкий: (сравниваем рост)
  Жираф - высокий. Табуретка - низкая.

- Длинный / Короткий: (сравниваем длину)
  Поезд - длинный. Карандаш - короткий.

- Широкий / Узкий:
  Река - широкая. Ручеек - узкий.
"""
        },
        '103': {
            'title': 'Дни недели',
            'explanation': """
================================================================================
|                              Дни недели                                     |
================================================================================
В неделе семь дней. Они всегда идут в одном и том же порядке.

1. Понедельник
2. Вторник
3. Среда
4. Четверг
5. Пятница
   (Эти 5 дней называются "буднями" - взрослые ходят на работу,
    а дети в садик или школу)

6. Суббота
7. Воскресенье
   (Эти 2 дня - "выходные", время для отдыха и игр)

После воскресенья всегда снова наступает понедельник!
"""
        },
        '104': {
            'title': 'Понятие "половина"',
            'explanation': """
================================================================================
|                           Понятие "половина"                                |
================================================================================
Половина - это одна из двух РАВНЫХ частей, на которые разделили
что-то целое.

Пример 1: Яблоко
Если разрезать яблоко ровно посередине, у нас получится две половины.
Чтобы снова получить целое яблоко, нужно сложить обе половины вместе.

Пример 2: Число
У нас есть 6 конфет. Разделим их поровну между двумя друзьями.
Каждый получит по 3 конфеты.
Говорят, что 3 - это половина от 6.
"""
        },
        '105': {
            'title': 'Структура простой задачи',
            'explanation': """
================================================================================
|                       Структура простой задачи                             |
================================================================================
Любая задачка похожа на маленький рассказ, в котором есть три части:

1. УСЛОВИЕ: То, что нам известно.
   "На ветке сидело 5 птичек."

2. ВОПРОС: То, что нам нужно найти.
   "Прилетело еще 2 птички. Сколько всего стало птичек?"

3. РЕШЕНИЕ И ОТВЕТ: Наши вычисления и итоговая фраза.
   Решение: 5 + 2 = 7 (птичек)
   Ответ: Всего стало 7 птичек.
"""
        }
    }
    return rules

def main():
    Mlogging.logging('[ rules ] Вход в список правил для всех классов')
    """
    Основная функция, которая собирает, группирует и отображает все правила
    с последовательной нумерацией.
    """
    # === Шаг 1: Сбор всех правил в один большой словарь ===
    all_rules = {}
    rule_parts = [
        get_rules_part_1(),
        get_rules_part_2(),
        get_rules_part_3(),
        get_rules_part_4(),
        get_rules_part_5(),
        get_rules_part_6(), # <--- ДОБАВЛЕНО
        get_rules_part_7()
    ]
    for part in rule_parts:
        all_rules.update(part)

    # === Шаг 2: Определение порядка и группировки правил по классам ===
    # Финальная, переработанная структура для всех 105 правил.
    section_order = {
        "Дошкольники и 1 класс (Самые основы)": [
            '91', '92', '93', '94', '95', '96', '97', '98', '99', '100',
            '101', '102', '103', '104', '105'
        ],
        "2 класс (Знакомство с арифметикой)": [
            '76', '77', '78', '79', '80', '81', '82', '84', '85', '86', '87', '88'
        ],
        "3 класс (Умножение, деление и доли)": [
            '61', '62', '89', '64', '68', '69', '73', '74'
        ],
        "4 класс (Дроби и многозначные числа)": [
            '46', '47', '48', '63', '66', '67'
        ],
        "5 класс (Десятичные дроби и проценты)": [
            '49', '50', '51', '55', '56', '59', '65', '70', '71', '83'
        ],
        "6 класс (Рациональные числа и пропорции)": [
            '52', '53', '60', '72', '2', '3'
        ],
        "7 класс (Алгебра: формулы и уравнения)": [
            '58', '5', '71' # Некоторые правила повторяются, так как актуальны для разных классов
        ],
        "8 класс (Корни и геометрия)": [
            '1', '4', '11', '19', '54'
        ],
        "9 класс (Тригонометрия и прогрессии)": [
            '6', '7', '12', '13', '15', '23', '20'
        ],
        "10 класс (Сложные функции и стереометрия)": [
            '8', '9', '10', '14', '17', '28'
        ],
        "11 класс (Начала анализа)": [
            '16', '21', '22', '27', '31', '32', '33', '34', '35'
        ],
        "Дополнительные и олимпиадные темы": [
            '18', '24', '25', '26', '29', '30', '36', '37', '38', '39',
            '40', '41', '42', '43', '44', '45'
        ]
    }

    # === Основной цикл программы (остается без изменений) ===
    while True:
        clear_screen()
        print("Справочник по математике (Для дошкольников и 1-11 классов)")
        print("==========================================================")

        display_counter = 1
        menu_map = {}

        for section_title, internal_keys in section_order.items():
            rules_to_show = [key for key in internal_keys if key in all_rules]
            if not rules_to_show:
                continue

            print(f"\n--- {section_title} ---")
            for key in rules_to_show:
                print(f"[{str(display_counter).rjust(3)}] {all_rules[key]['title']}")
                menu_map[str(display_counter)] = key
                display_counter += 1

        print("\n[  0] Выход")
        Mlogging.logging(' [ rules ] Выход')
        print("---------------------------------------")

        choice = input("Выберите номер правила для просмотра: ").strip()
        Mlogging.logging(f' [ rules ] Выбор пользователя: {choice}')

        if choice == '0':
            print("Возвращаемся в главное меню...")
            break

        if choice in menu_map:
            internal_key = menu_map[choice]
            explanation = all_rules[internal_key]['explanation']
            
            clear_screen()
            print(explanation)
            input("\nНажмите Enter, чтобы вернуться в меню правил...")
        else:
            print(f"\nОшибка: правила с номером '{choice}' не существует.")
            input("Нажмите Enter, чтобы попробовать снова...")